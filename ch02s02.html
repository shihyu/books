<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2. 常量</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C編程一站式學習" /><link rel="up" href="ch02.html" title="第 2 章 常量、變數和表達式" /><link rel="prev" href="ch02s01.html" title="1. 繼續Hello World" /><link rel="next" href="expr.variable.html" title="3. 變數" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. 常量</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s01.html">上一頁</a> </td><th width="60%" align="center">第 2 章 常量、變數和表達式</th><td width="20%" align="right"> <a accesskey="n" href="expr.variable.html">下一頁</a></td></tr></table><hr /></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2707837"></a>2. 常量</h2></div></div></div><p>常量（Constant）<a id="id2707845" class="indexterm"></a>是程序中最基本的元素，有字元（Character）<a id="id2707852" class="indexterm"></a>常量、整數（Integer）<a id="id2707859" class="indexterm"></a>常量、浮點數（Floating Point）<a id="id2707866" class="indexterm"></a>常量和枚舉常量。枚舉常量將在<a class="xref" href="ch07s03.html#struct.datatag">第 3 節 “數據類型標誌”</a>介紹。下面看一個例子：</p><pre class="programlisting">printf("character: %c\ninteger: %d\nfloating point: %f\n", '}', 34, 3.14);</pre><p>字元常量要用單引號括起來，例如上面的<code class="literal">'}'</code>，注意單引號只能括一個字元而不能像雙引號那樣括一串字元，字元常量也可以是一個轉義序列，例如<code class="literal">'\n'</code>，這時雖然單引號括了兩個字元，但實際上只表示一個字元。和字元串字面值中使用轉義序列有一點區別，如果在字元常量中要表示雙引號"和問號?，既可以使用轉義序列<code class="literal">\"</code>和<code class="literal">\?</code>，也可以直接用字元"和?，而要表示'和\則必須使用轉義序列。<sup>[<a id="id2707915" href="#ftn.id2707915" class="footnote">2</a>]</sup></p><p>計算機中整數和小數的內部表示方式不同（將在<a class="xref" href="ch14.html#number">第 14 章 <i>計算機中數的表示</i></a>詳細介紹），因而在C語言中是兩種不同的類型（Type）<a id="id2707953" class="indexterm"></a>，例如上例的<code class="literal">34</code>和<code class="literal">3.14</code>，小數在計算機術語中稱為浮點數。這個語句的輸出結果和Hello world不太一樣，字元串<code class="literal">"character: %c\ninteger: %d\nfloating point: %f\n"</code>並不是按原樣打印輸出的，而是輸出成這樣：</p><pre class="screen">character: }
integer: 34
floating point: 3.14</pre><p><code class="literal">printf</code>中的第一個字元串稱為格式化字元串（Format String）<a id="id2707992" class="indexterm"></a>，它規定了後面幾個常量以何種格式插入到這個字元串中，在格式化字元串中%號（Percent Sign）<a id="id2708002" class="indexterm"></a>後面加上字母c、d、f分別表示字元型、整型和浮點型的轉換說明（Conversion Specification）<a id="id2708011" class="indexterm"></a>，轉換說明只在格式化字元串中占個位置，並不出現在最終的打印結果中，這種用法通常叫做占位符（Placeholder）<a id="id2708020" class="indexterm"></a>。這也是一種字面意思與真實意思不同的情況，但是轉換說明和轉義序列又有區別：<span class="emphasis"><em>轉義序列是編譯時處理的，而轉換說明是在運行時調用<code class="literal">printf</code>函數處理的</em></span>。源檔案中的字元串字面值是<code class="literal">"character: %c\ninteger: %d\nfloating point: %f\n"</code>，<code class="literal">\n</code>占兩個字元，而編譯之後保存在執行檔中的字元串是<code class="literal">character： %c換行integer: %d換行floating point: %f換行</code>，<code class="literal">\n</code>已經被替換成一個換行符，而<code class="literal">%c</code>不變，然後在運行時這個字元串被傳給<code class="literal">printf</code>，<code class="literal">printf</code>再把其中的<code class="literal">%c</code>、<code class="literal">%d</code>、<code class="literal">%f</code>解釋成轉換說明。</p><p>有時候不同類型的數據很容易弄混，例如<code class="literal">"5"</code>、<code class="literal">'5'</code>、<code class="literal">5</code>，如果你注意了它們的界定符就會很清楚，第一個是字元串字面值，第二個是字元，第三個是整數，看了本章後面幾節你就知道為什麼一定要嚴格區分它們之間的差別了。</p><div class="simplesect" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a id="id2708122"></a>習題</h3></div></div></div><p>1、總結前面介紹的轉義序列的規律，想想在<code class="literal">printf</code>的格式化字元串中怎麼表示一個%字元？寫個小程序試驗一下。</p></div><div class="footnotes"><br /><hr width="100" align="left" /><div class="footnote"><p><sup>[<a id="ftn.id2707915" href="#id2707915" class="para">2</a>] </sup>讀者可能會奇怪，為什麼需要規定一個轉義序列<code class="literal">\?</code>呢？因為C語言規定了一些三連符（Trigraph）<a id="id2707926" class="indexterm"></a>，在某些特殊的終端上缺少某些字元，需要用Trigraph輸入，例如用<code class="literal">??=</code>表示#字元。Trigraph極不常用，介紹這個只是為了讓讀者理解C語言規定轉義序列的作用，即特殊字元轉普通字元，普通字元轉特殊字元，?也是一種特殊字元。極不常用的C語法在本書中通常不會介紹。</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s01.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="expr.variable.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">1. 繼續Hello World </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 3. 變數</td></tr></table></div></body></html>
