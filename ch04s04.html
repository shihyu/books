<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4. switch語句</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C編程一站式學習" /><link rel="up" href="ch04.html" title="第 4 章 分支語句" /><link rel="prev" href="ch04s03.html" title="3. 布爾代數" /><link rel="next" href="ch05.html" title="第 5 章 深入理解函數" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. switch語句</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s03.html">上一頁</a> </td><th width="60%" align="center">第 4 章 分支語句</th><td width="20%" align="right"> <a accesskey="n" href="ch05.html">下一頁</a></td></tr></table><hr /></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2719538"></a>4. switch語句</h2></div></div></div><p><code class="literal">switch</code>語句可以產生具有多個分支的控制流程。它的格式是：</p><div class="literallayout"><p>switch (控製表達式) {<br />
case 常量表達式： 語句列表<br />
case 常量表達式： 語句列表<br />
...<br />
default： 語句列表<br />
}</p></div><p>例如以下程序根據傳入的參數1~7分別打印Monday~Sunday：</p><div class="example"><a id="id2719574"></a><p class="title"><b>例 4.1. switch語句</b></p><div class="example-contents"><div><img src="images/cond.switch1.png" /></div></div></div><br class="example-break" /><p>如果傳入的參數是2，則從<code class="literal">case 2</code>分支開始執行，先是打印相應的信息，然後遇到<code class="literal">break</code>語句，它的作用是跳出整個<code class="literal">switch</code>語句塊。C語言規定各<code class="literal">case</code>分支的常量表達式必須互不相同，如果控製表達式不等於任何一個常量表達式，則從<code class="literal">default</code>分支開始執行，通常把<code class="literal">default</code>分支寫在最後，但不是必須的。使用<code class="literal">switch</code>語句要注意幾點：</p><div class="orderedlist"><ol type="1"><li><p><code class="literal">case</code>後面跟表達式的必須是常量表達式，這個值和全局變數的初始值一樣必須在編譯時計算出來。</p></li><li><p><a class="xref" href="ch04s02.html#cond.ifelse">第 2 節 “if/else語句”</a>講過浮點型不適合做精確比較，所以C語言規定<code class="literal">case</code>後面跟的必須是整型常量表達式。</p></li><li><p>進入<code class="literal">case</code>後如果沒有遇到<code class="literal">break</code>語句就會一直往下執行，後面其它<code class="literal">case</code>或<code class="literal">default</code>分支的語句也會被執行到，直到遇到<code class="literal">break</code>，或者執行到整個<code class="literal">switch</code>語句塊的末尾。通常每個<code class="literal">case</code>後面都要加上<code class="literal">break</code>語句，但有時會故意不加<code class="literal">break</code>來利用這個特性，例如：</p><div class="example"><a id="id2719735"></a><p class="title"><b>例 4.2. 缺break的switch語句</b></p><div class="example-contents"><div><img src="images/cond.switch2.png" /></div></div></div><br class="example-break" /></li></ol></div><p><code class="literal">switch</code>語句不是必不可缺的，顯然可以用一組<code class="literal">if ... else if ... else if ... else ...</code>代替，但是一方面用<code class="literal">switch</code>語句會使代碼更清晰，另一方面，有時候編譯器會對<code class="literal">switch</code>語句進行整體優化，使它比等價的<code class="literal">if/else</code>語句所生成的指令效率更高。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s03.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">3. 布爾代數 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 第 5 章 深入理解函數</td></tr></table></div></body></html>
