<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4. 運算符總結</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C編程一站式學習" /><link rel="up" href="ch16.html" title="第 16 章 運算符詳解" /><link rel="prev" href="ch16s03.html" title="3. Side Effect與Sequence Point" /><link rel="next" href="ch17.html" title="第 17 章 計算機體繫結構基礎" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. 運算符總結</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch16s03.html">上一頁</a> </td><th width="60%" align="center">第 16 章 運算符詳解</th><td width="20%" align="right"> <a accesskey="n" href="ch17.html">下一頁</a></td></tr></table><hr /></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2763540"></a>4. 運算符總結</h2></div></div></div><p>到此為止，除了和指針相關的運算符還沒講之外，其它運算符都講過了，是時候做一個總結了。</p><p>運算符+ - * / % &gt; &lt; &gt;= &lt;= == != &amp; | ^ 以及各種復合賦值運算符要求兩邊的操作數類型一致，條件運算符?:要求後兩個操作數類型一致，這些運算符在計算之前都需要做Usual Arithmetic Conversion。</p><p>下面按優先順序從高到低的順序總結一下C語言的運算符，每一條所列的各運算符具有相同的優先順序，對於同一優先順序的多個運算符按什麼順序計算也有說明，雙目運算符就簡單地用“<span class="quote">左結合</span>”或“<span class="quote">右結合</span>”來說明了。和指針有關的運算符* &amp; -&gt;也在這裡列出來了，到<a class="xref" href="ch23.html#pointer">第 23 章 <i>指針</i></a>再詳細解釋。</p><p>1、標識符、常量、字元串和用()括號套起來的表達式是組成表達式的最基本單元，在運算中做操作數，優先順序最高。</p><p>2、尾碼運算符，包括數組取下標[]、函數調用()、結構體取成員“<span class="quote">.</span>”、指向結構體的指針取成員-&gt;、尾碼自增++、尾碼自減--。如果一個操作數後面有多個尾碼，按照離操作數從近到遠的順序（也就是從左到右）依次計算，比如<code class="literal">a.name++</code>，先算<code class="literal">a.name</code>，再++，這裡的<code class="literal">.name</code>應該看成<code class="literal">a</code>的一個尾碼，而不是把<code class="literal">.</code>看成雙目運算符。</p><p>3、單目運算符，包括首碼自增++、首碼自減--、<code class="literal">sizeof</code>、類型轉換()、取地址運算&amp;、指針間接定址*、正號+、負號-、按位取反~、邏輯非!。如果一個操作數前面有多個首碼，按照離操作數從近到遠的順序（也就是從右到左）依次計算，比如<code class="literal">!~a</code>，先算<code class="literal">~a</code>，再求!。</p><p>4、乘*、除/、模%運算符。這三個運算符是左結合的。</p><p>5、加+、減-運算符。左結合。</p><p>6、移位運算符&lt;&lt;和&gt;&gt;。左結合。</p><p>7、關係運算符&lt; &gt; &lt;= &gt;=。左結合。</p><p>8、相等性運算符==和!=。左結合。</p><p>9、按位與&amp;。左結合。</p><p>10、按位異或^。左結合。</p><p>11、按位或|。左結合。</p><p>12、邏輯與&amp;&amp;。左結合。</p><p>13、邏輯或||。左結合。</p><p>14、條件運算符:?。在<a class="xref" href="ch04s02.html#cond.ifelse">第 2 節 “if/else語句”</a>講過Dangling-else問題，條件運算符也有類似的問題。例如<code class="literal">a ? b : c ? d : e</code>是看成<code class="literal">(a ? b : c) ? d : e</code>還是<code class="literal">a ? b : (c ? d : e)</code>呢？C語言規定是後者。</p><p>15、賦值=和各種復合賦值（<code class="literal">*=</code> <code class="literal">/=</code> <code class="literal">%=</code> <code class="literal">+=</code> <code class="literal">-=</code> <code class="literal">&lt;&lt;=</code> <code class="literal">&gt;&gt;=</code> <code class="literal">&amp;=</code> <code class="literal">^=</code> <code class="literal">|=</code>）。在雙目運算符中只有賦值和復合賦值是右結合的。</p><p>16、逗號運算符。左結合。</p><p><a class="xref" href="bi01.html#bibli.kr" title="The C Programming Language">[<abbr class="abbrev">K&amp;R</abbr>]</a>第2章也有這樣一個列表，但是對於結合性解釋得不夠清楚。左結合和右結合這兩個概念只對雙目運算符有意義，對於首碼、尾碼和三目運算符我單獨做了說明。C語言表達式的詳細語法規則可以參考<a class="xref" href="bi01.html#bibli.c99" title="ISO/IEC 9899: Programming Languages － C">[<abbr class="abbrev">C99</abbr>]</a>的Annex A.2，其實語法規則並不是用優先順序和結合性這兩個概念來表述的，有一些細節用優先順序和結合性是表達不了的，只有看C99才能瞭解完整的語法規則。</p><div class="simplesect" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a id="id2763836"></a>習題</h3></div></div></div><p>1、以下代碼得到的<code class="literal">sum</code>是0xffff，對嗎？</p><pre class="programlisting">int i = 0;
unsigned int sum = 0;
for (; i &lt; 16; i++)
	sum = sum + 1U&lt;&lt;i;</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch16s03.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="ch16.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="ch17.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">3. Side Effect與Sequence Point </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 第 17 章 計算機體繫結構基礎</td></tr></table></div></body></html>
