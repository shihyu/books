<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1. 繼續Hello World</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C編程一站式學習" /><link rel="up" href="ch02.html" title="第 2 章 常量、變數和表達式" /><link rel="prev" href="ch02.html" title="第 2 章 常量、變數和表達式" /><link rel="next" href="ch02s02.html" title="2. 常量" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1. 繼續Hello World</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02.html">上一頁</a> </td><th width="60%" align="center">第 2 章 常量、變數和表達式</th><td width="20%" align="right"> <a accesskey="n" href="ch02s02.html">下一頁</a></td></tr></table><hr /></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2707148"></a>1. 繼續Hello World</h2></div></div></div><p>在<a class="xref" href="intro.helloworld.html" title="4. 第一個程序">第 4 節 “第一個程序”</a>中，讀者應該已經嘗試對Hello world程序做各種改動看編譯運行結果，其中有些改動會導致編譯出錯，有些改動會影響程序的輸出，有些改動則沒有任何影響，下面我們總結一下。首先，註釋可以跨行，也可以穿插在程序之中，看下面的例子。</p><div class="example"><a id="id2706541"></a><p class="title"><b>例 2.1. 帶更多註釋的Hello World</b></p><div class="example-contents"><pre class="programlisting">#include &lt;stdio.h&gt;

/* 
 * comment1
 * main: generate some simple output
 */

int main(void)
{
	printf(/* comment2 */"Hello, world.\n"); /* comment3 */
	return 0;
}</pre></div></div><br class="example-break" /><p>第一個註釋跨了四行，頭尾兩行是註釋的界定符（Delimiter）<a id="id2707164" class="indexterm"></a>/*和*/，中間兩行開頭的*號（Asterisk）<a id="id2707172" class="indexterm"></a>並沒有特殊含義，只是為了看起來整齊，這不是語法規則而是大家都遵守的C代碼風格（Coding Style）<a id="id2707181" class="indexterm"></a>之一，代碼風格將在<a class="xref" href="ch09.html#codingstyle">第 9 章 <i>編碼風格</i></a>詳細介紹。</p><p>使用註釋需要注意兩點：</p><div class="orderedlist"><ol type="1"><li><p>註釋不能嵌套（Nest）<a id="id2707207" class="indexterm"></a>使用，就是說一個註釋的文字中不能再出現/*和*/了，例如<code class="literal">/* text1 /* text2 */ text3 */</code>是錯誤的，編譯器只把<code class="literal">/* text1 /* text2 */</code>看成註釋，後面的<code class="literal"> text3 */</code>無法解析，因而會報錯。</p></li><li><p>有的C代碼中有類似<code class="literal">// comment</code>的註釋，兩個/斜線（Slash）<a id="id2707243" class="indexterm"></a>表示從這裡直到該行末尾的所有字元都屬於註釋，這種註釋不能跨行，也不能穿插在一行代碼中間。這是從C++借鑒的語法，在C99中被標準化。</p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">C語言標準</h3><p>C語言的發展歷史大致上分為三個階段：Old Style C<a id="id2707264" class="indexterm"></a>、C89<a id="id2707270" class="indexterm"></a>和C99<a id="id2707281" class="indexterm"></a>。Ken Thompson和Dennis Ritchie最初發明C語言時有很多語法和現在最常用的寫法並不一樣，但為了向後兼容性（Backward Compatibility）<a id="id2707292" class="indexterm"></a>，這些語法仍然在C89和C99中保留下來了，本書不詳細講Old Style C，但在必要的地方會加以說明。C89是最早的C語言規範，于1989年提出，1990年首先由ANSI（美國國家標準委員會，American National Standards Institute）<a id="id2707303" class="indexterm"></a>推出，後來被接納為ISO國際標準（ISO/IEC 9899:1990）<a id="id2707312" class="indexterm"></a>，因而有時也稱為C90<a id="id2707322" class="indexterm"></a>，最經典的C語言教材<a class="xref" href="bi01.html#bibli.kr" title="The C Programming Language">[<abbr class="abbrev">K&amp;R</abbr>]</a>就是基于這個版本的，C89是目前最廣泛採用的C語言標準，大多數編譯器都完全支持C89。C99標準（ISO/IEC 9899:1999）<a id="id2707340" class="indexterm"></a>是在1999年推出的，加入了許多新特性，但目前仍沒有得到廣泛支持，在C99推出之後相當長的一段時間裡，連<code class="literal">gcc</code>也沒有完全實現C99的所有特性。C99標準詳見<a class="xref" href="bi01.html#bibli.c99" title="ISO/IEC 9899: Programming Languages － C">[<abbr class="abbrev">C99</abbr>]</a>。本書講C的語法以C99為準，但示例代碼通常只使用C89語法，很少使用C99的新特性。</p><p>C標準的目的是為了精確定義C語言，而不是為了教別人怎麼編程，C標準在表達上追求準確和無歧義，卻十分不容易看懂，<a class="xref" href="bi01.html#bibli.standardc" title="Standard C: A Reference">[<abbr class="abbrev">Standard C</abbr>]</a>和<a class="xref" href="bi01.html#bibli.standardclib" title="The Standard C Library">[<abbr class="abbrev">Standard C Library</abbr>]</a>是對C89及其修訂版本的闡釋（可惜作者沒有隨C99更新這兩本書），比C標準更容易看懂，另外，參考<a class="xref" href="bi01.html#bibli.rationale" title="Rationale for International Standard － Programming Languages － C">[<abbr class="abbrev">C99 Rationale</abbr>]</a>也有助于加深對C標準的理解。</p></div><p>像<code class="literal">"Hello, world.\n"</code>這種由雙引號（Double Quote）<a id="id2707397" class="indexterm"></a>引起來的一串字元稱為字元串字面值（String Literal）<a id="id2707405" class="indexterm"></a>，或者簡稱字元串。注意，程序的運行結果並沒有雙引號，<code class="literal">printf</code>打印出來的只是裡面的一串字元<code class="literal">Hello, world.</code>，因此雙引號是字元串字面值的界定符，夾在雙引號中間的一串字元才是它的內容。注意，打印出來的結果也沒有<code class="literal">\n</code>這兩個字元，這是為什麼呢？在<a class="xref" href="intro.naturalformal.html" title="2. 自然語言和形式語言">第 2 節 “自然語言和形式語言”</a>中提到過，C語言規定了一些轉義序列（Escape Sequence）<a id="id2707438" class="indexterm"></a>，這裡的<code class="literal">\n</code>並不表示它的字面意思，也就是說並不表示\和n這兩個字元本身，而是合起來表示一個換行符（Line Feed）<a id="id2707454" class="indexterm"></a>。例如我們寫三條打印語句：</p><pre class="programlisting">printf("Hello, world.\n");
printf("Goodbye, ");
printf("cruel world!\n");</pre><p>運行的結果是第一條語句單獨打到第一行，後兩條語句都打到第二行。為了節省篇幅突出重點，以後的例子通常省略<code class="literal">#include</code>和<code class="literal">int main(void) { ... }</code>這些Boilerplate，但讀者在練習時需要加上這些構成一個完整的程序才能編譯通過。C標準規定的轉義字元有以下幾種：</p><div class="table"><a id="id2707486"></a><p class="title"><b>表 2.1. C標準規定的轉義字元</b></p><div class="table-contents"><table summary="C標準規定的轉義字元" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td>\'</td><td>單引號'（Single Quote或Apostrophe）<a id="id2707507" class="indexterm"></a></td></tr><tr><td>\"</td><td>雙引號"</td></tr><tr><td>\?</td><td>問號?（Question Mark）<a id="id2707526" class="indexterm"></a></td></tr><tr><td>\\</td><td>反斜線\（Backslash）<a id="id2707538" class="indexterm"></a></td></tr><tr><td>\a</td><td>響鈴（Alert或Bell）<a id="id2707551" class="indexterm"></a></td></tr><tr><td>\b</td><td>退格（Backspace）<a id="id2707562" class="indexterm"></a></td></tr><tr><td>\f</td><td>分頁符（Form Feed）<a id="id2707574" class="indexterm"></a></td></tr><tr><td>\n</td><td>換行（Line Feed）</td></tr><tr><td>\r</td><td>回車（Carriage Return）<a id="id2707592" class="indexterm"></a></td></tr><tr><td>\t</td><td>水平製表符（Horizontal Tab）<a id="id2707604" class="indexterm"></a></td></tr><tr><td>\v</td><td>垂直製表符（Vertical Tab）<a id="id2707616" class="indexterm"></a></td></tr></tbody></table></div></div><br class="table-break" /><p>如果在字元串字面值中要表示單引號和問號，既可以使用轉義序列<code class="literal">\'</code>和<code class="literal">\?</code>，也可以直接用字元'和?，而要表示\或"則必須使用轉義序列，因為\字元表示轉義而不表示它的字面含義，"表示字元串的界定符而不表示它的字面含義。可見轉義序列有兩個作用：一是把普通字元轉義成特殊字元，例如把字母n轉義成換行符；二是把特殊字元轉義成普通字元，例如\和"是特殊字元，轉義後取它的字面值。</p><p>C語言規定了幾個控制字元，不能用鍵盤直接輸入，因此採用\加字母的轉義序列表示。<code class="literal">\a</code>是響鈴字元，在字元終端下顯示這個字元的效果是PC喇叭發出嘀的一聲，在圖形界面終端下的效果取決於終端的實現。在終端下顯示<code class="literal">\b</code>和按下退格鍵的效果相同。<code class="literal">\f</code>是分頁符，主要用於控制打印機在打印原始碼時提前分頁，這樣可以避免一個函數跨兩頁打印。<code class="literal">\n</code>和<code class="literal">\r</code>分別表示Line Feed和Carriage Return，這兩個詞來自老式的英文打字機，Line Feed是跳到下一行（進紙，喂紙，有個喂的動作所以是feed），Carriage Return是回到本行開頭（Carriage是卷着紙的軸，隨着打字慢慢左移，打完一行就一下子移回最右邊），如果你看過歐美的老電影應該能想起來這是什麼。用老式打字機打完一行之後需要這麼兩個動作，<code class="literal">\r\n</code>，所以現在Windows上的文本檔案用<code class="literal">\r\n</code>做行分隔符，許多應用層網絡協議（如HTTP）也用<code class="literal">\r\n</code>做行分隔符，而Linux和各種UNIX上的文本檔案只用<code class="literal">\n</code>做行分隔符。在終端下顯示<code class="literal">\t</code>和按下Tab鍵的效果相同，用於在終端下定位表格的下一列，<code class="literal">\v</code>用於在終端下定位表格的下一行。<code class="literal">\v</code>比較少用，<code class="literal">\t</code>比較常用，以後將“<span class="quote">水平製表符</span>”簡稱為“<span class="quote">製表符</span>”或Tab。請讀者用<code class="literal">printf</code>語句試試這幾個控制字元的作用。</p><p>注意<code class="literal">"Goodbye, "</code>末尾的空格，字元串字面值中的空格也算一個字元，也會出現在輸出結果中，而程序中別處的空格和Tab多一個少一個往往是無關緊要的，不會對編譯的結果產生任何影響，例如不縮進不會影響程序的結果，<code class="literal">main</code>後面多幾個空格也沒影響，但是<code class="literal">int</code>和<code class="literal">main</code>之間至少要有一個空格分隔開：</p><pre class="programlisting">int main    (void)
{
printf("Hello, world.\n");
return 0;
}</pre><p>不僅空格和Tab是無關緊要的，換行也是如此，我甚至可以把整個程序寫成一行，但是<code class="literal">include</code>必須單獨占一行：</p><pre class="programlisting">#include&lt;stdio.h&gt;
int main(void){printf("Hello, world.\n");return 0;}</pre><p>這樣也行，但肯定不是好的代碼風格，去掉縮進已經很影響可讀性了，寫成現在這個樣子可讀性更差。如果編譯器說第2行有錯誤，也很難判斷是哪個語句有錯誤。所以，<span class="emphasis"><em>好的代碼風格要求縮進整齊，每個語句一行，適當留空行</em></span>。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="ch02s02.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">第 2 章 常量、變數和表達式 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 2. 常量</td></tr></table></div></body></html>
