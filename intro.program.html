<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1. 程序和編程語言</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C編程一站式學習" /><link rel="up" href="ch01.html" title="第 1 章 程序的基本概念" /><link rel="prev" href="ch01.html" title="第 1 章 程序的基本概念" /><link rel="next" href="intro.naturalformal.html" title="2. 自然語言和形式語言" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1. 程序和編程語言</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01.html">上一頁</a> </td><th width="60%" align="center">第 1 章 程序的基本概念</th><td width="20%" align="right"> <a accesskey="n" href="intro.naturalformal.html">下一頁</a></td></tr></table><hr /></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="intro.program"></a>1. 程序和編程語言</h2></div></div></div><p>程序（Program）<a id="id2655709" class="indexterm"></a>告訴計算機應如何完成一個計算任務，這裡的計算可以是數學運算，比如解方程，也可以是符號運算，比如查找和替換文檔中的某個單詞。從根本上說，計算機是由數字電路組成的運算機器，只能對數字做運算，程序之所以能做符號運算，是因為符號在計算機內部也是用數字表示的。此外，程序還可以處理聲音和圖像，聲音和圖像在計算機內部必然也是用數字表示的，這些數字經過專門的硬件設備轉換成人可以聽到、看到的聲音和圖像。</p><p>程序由一系列指令（Instruction）<a id="id2655719" class="indexterm"></a>組成，指令是指示計算機做某種運算的命令，通常包括以下幾類：</p><div class="variablelist"><dl><dt><span class="term">輸入（Input）<a id="id2655663" class="indexterm"></a></span></dt><dd><p>從鍵盤、檔案或者其它設備獲取數據。</p></dd><dt><span class="term">輸出（Output）<a id="id2703792" class="indexterm"></a></span></dt><dd><p>把數據顯示到屏幕，或者存入一個檔案，或者發送到其它設備。</p></dd><dt><span class="term">基本運算</span></dt><dd><p>執行最基本的數學運算（加減乘除）和數據存取。</p></dd><dt><span class="term">測試和分支</span></dt><dd><p>測試某個條件，然後根據不同的測試結果執行不同的後續指令。</p></dd><dt><span class="term">循環</span></dt><dd><p>重複執行一系列操作。</p></dd></dl></div><p>對於程序來說，有上面這幾類指令就足夠了。你曾用過的任何一個程序，不管它有多麼複雜，都是由這幾類指令組成的。程序是那麼的複雜，而編寫程序可以用的指令卻只有這麼簡單的幾種，這中間巨大的落差就要由程序員去填了，所以編寫程序理應是一件相當複雜的工作。<span class="emphasis"><em>編寫程序可以說就是這樣一個過程：把複雜的任務分解成子任務，把子任務再分解成更簡單的任務，層層分解，直到最後簡單得可以用以上指令來完成。</em></span></p><p>編程語言（Programming Language）<a id="id2703866" class="indexterm"></a>分為低級語言（Low-level Language）<a id="id2703874" class="indexterm"></a>和高級語言（High-level Language）<a id="id2703882" class="indexterm"></a>。機器語言（Machine Language）<a id="id2703891" class="indexterm"></a>和彙編語言（Assembly Language）<a id="id2703899" class="indexterm"></a>屬於低級語言，直接用計算機指令編寫程序。而C、C++、Java、Python等屬於高級語言，用語句（Statement）<a id="id2703909" class="indexterm"></a>編寫程序，語句是計算機指令的抽象表示。舉個例子，同樣一個語句用C語言、彙編語言和機器語言分別表示如下：</p><div class="table"><a id="id2703919"></a><p class="title"><b>表 1.1. 一個語句的三種表示</b></p><div class="table-contents"><table summary="一個語句的三種表示" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>編程語言</th><th>表示形式</th></tr></thead><tbody><tr><td>C語言</td><td>a=b+1;</td></tr><tr><td>彙編語言</td><td><div class="literallayout"><p>mov    0x804a01c,%eax<br />
add    $0x1,%eax<br />
mov    %eax,0x804a018</p></div></td></tr><tr><td>機器語言</td><td><div class="literallayout"><p>a1 1c a0 04 08<br />
83 c0 01<br />
a3 18 a0 04 08</p></div></td></tr></tbody></table></div></div><br class="table-break" /><p>計算機只能對數字做運算，符號、聲音、圖像在計算機內部都要用數字表示，指令也不例外，上表中的機器語言完全由十六進制數字組成。最早的程序員都是直接用機器語言編程，但是很麻煩，需要查大量的表格來確定每個數字表示什麼意思，編寫出來的程序很不直觀，而且容易出錯，於是有了彙編語言，把機器語言中一組一組的數字用助記符（Mnemonic）<a id="id2703988" class="indexterm"></a>表示，直接用這些助記符寫出彙編程序，然後讓彙編器（Assembler）<a id="id2703997" class="indexterm"></a>去查表把助記符替換成數字，也就把彙編語言翻譯成了機器語言。從上面的例子可以看出，彙編語言和機器語言的指令是一一對應的，彙編語言有三條指令，機器語言也有三條指令，彙編器就是做一個簡單的替換工作，例如在第一條指令中，把<code class="literal">movl ?,%eax</code>這種格式的指令替換成機器碼<code class="literal">a1 ?</code>，?表示一個地址，在彙編指令中是<code class="literal">0x804a01c</code>，轉換成機器碼之後是<code class="literal">1c a0 04 08</code>（這是指令中的十六進制數的小端表示，小端表示將在<a class="xref" href="ch18s05.html#asm.relocatable">第 5.1 節 “目標檔案”</a>介紹）。</p><p>從上面的例子還可以看出，C語言的語句和低級語言的指令之間不是簡單的一一對應關係，一條<code class="literal">a=b+1;</code>語句要翻譯成三條彙編或機器指令，這個過程稱為編譯（Compile）<a id="id2704056" class="indexterm"></a>，由編譯器（Compiler）<a id="id2704064" class="indexterm"></a>來完成，顯然編譯器的功能比彙編器要複雜得多。用C語言編寫的程序必須經過編譯轉成機器指令才能被計算機執行，編譯需要花一些時間，這是用高級語言編程的一個缺點，然而更多的是優點。首先，用C語言編程更容易，寫出來的代碼更緊湊，可讀性更強，出了錯也更容易改正。其次，C語言是可移植的（Portable）<a id="id2704085" class="indexterm"></a>或者稱為平台無關的（Platform Independent）<a id="id2704093" class="indexterm"></a>。</p><p>平台這個詞有很多種解釋，可以指計算機體繫結構（Architecture）<a id="id2704105" class="indexterm"></a>，也可以指操作系統（Operating System）<a id="id2704114" class="indexterm"></a>，也可以指開發平台（編譯器、連結器等）。不同的計算機體繫結構有不同的指令集（Instruction Set）<a id="id2704122" class="indexterm"></a>，可以識別的機器指令格式是不同的，直接用某種體繫結構的彙編或機器指令寫出來的程序只能在這種體繫結構的計算機上運行，然而各種體繫結構的計算機都有各自的C編譯器，可以把C程序編譯成各種不同體繫結構的機器指令，這意味着用C語言寫的程序只需稍加修改甚至不用修改就可以在各種不同的計算機上編譯運行。各種高級語言都具有C語言的這些優點，所以絶大部分程序是用高級語言編寫的，只有和硬件關係密切的少數程序（例如驅動程式）才會用到低級語言。還要注意一點，即使在相同的體繫結構和操作系統下，用不同的C編譯器（或者同一個C編譯器的不同版本）編譯同一個程序得到的結果也有可能不同，C語言有些語法特性在C標準中並沒有明確規定，各編譯器有不同的實現，編譯出來的指令的行為特性也會不同，應該儘量避免使用不可移植的語法特性。</p><p>總結一下編譯執行的過程，首先你用文本編輯器寫一個C程序，然後保存成一個檔案，例如<code class="literal">program.c</code>（通常C程序的檔案名尾碼是<code class="literal">.c</code>），這稱為原始碼（Source Code）<a id="id2703560" class="indexterm"></a>或源檔案，然後運行編譯器對它進行編譯，編譯的過程並不執行程序，而是把原始碼全部翻譯成機器指令，再加上一些描述信息，生成一個新的檔案，例如<code class="literal">a.out</code>，這稱為執行檔，執行檔可以被操作系統加載運行，計算機執行該檔案中由編譯器生成的指令，如下圖所示：</p><div class="figure"><a id="id2703581"></a><p class="title"><b>圖 1.1. 編譯執行的過程</b></p><div class="figure-contents"><div><img src="images/intro.compile.png" alt="編譯執行的過程" /></div></div></div><br class="figure-break" /><p>有些高級語言以解釋（Interpret）<a id="id2703595" class="indexterm"></a>的方式執行，解釋執行過程和C語言的編譯執行過程很不一樣。例如編寫一個Shell腳本<code class="literal">script.sh</code>，內容如下：</p><pre class="programlisting">#! /bin/sh
VAR=1
VAR=$(($VAR+1))
echo $VAR</pre><p>定義Shell變數<code class="literal">VAR</code>的初始值是1，然後自增1，然後打印<code class="literal">VAR</code>的值。用Shell程序<code class="literal">/bin/sh</code>解釋執行這個腳本，結果如下：</p><pre class="screen">$ /bin/sh script.sh
2</pre><p>這裡的<code class="literal">/bin/sh</code>稱為解釋器（Interpreter）<a id="id2703650" class="indexterm"></a>，它把腳本中的每一行當作一條命令解釋執行，而不需要先生成包含機器指令的執行檔再執行。如果把腳本中的這三行當作三條命令直接敲到Shell提示符下，也能得到同樣的結果：</p><pre class="screen">$ VAR=1
$ VAR=$(($VAR+1))
$ echo $VAR
2</pre><div class="figure"><a id="id2703667"></a><p class="title"><b>圖 1.2. 解釋執行的過程</b></p><div class="figure-contents"><div><img src="images/intro.interpret.png" alt="解釋執行的過程" /></div></div></div><br class="figure-break" /><p>編程語言仍在發展演化。以上介紹的機器語言稱為第一代語言（1GL，1st Generation Programming Language）<a id="id2704432" class="indexterm"></a>，彙編語言稱為第二代語言（2GL，2nd Generation Programming Language）<a id="id2704441" class="indexterm"></a>，C、C++、Java、Python等可以稱為第三代語言（3GL，3rd Generation Programming Language）<a id="id2704450" class="indexterm"></a>。目前已經有了4GL（4th Generation Programming Language）<a id="id2704459" class="indexterm"></a>和5GL（5th Generation Programming Language）<a id="id2704468" class="indexterm"></a>的概念。3GL的編程語言雖然是用語句編程而不直接用指令編程，但語句也分為輸入、輸出、基本運算、測試分支和循環等幾種，和指令有直接的對應關係。而4GL以後的編程語言更多是描述要做什麼（Declarative）<a id="id2704480" class="indexterm"></a>而不描述具體一步一步怎麼做（Imperative）<a id="id2704488" class="indexterm"></a>，具體一步一步怎麼做完全由編譯器或解釋器決定，例如SQL語言（SQL，Structured Query Language，結構化查詢語言）<a id="id2704496" class="indexterm"></a>就是這樣的例子。</p><div class="simplesect" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a id="id2704506"></a>習題</h3></div></div></div><p>1、解釋執行的語言相比編譯執行的語言有什麼優缺點？</p><p>這是我們的第一個思考題。本書的思考題通常要求讀者係統地總結當前小節的知識，結合以前的知識，並經過一定的推理，然後作答。本書強調的是基本概念，讀者應該抓住概念的定義和概念之間的關係來總結，比如本節介紹了很多概念：<span class="emphasis"><em>程序</em></span>由<span class="emphasis"><em>語句</em></span>或<span class="emphasis"><em>指令</em></span>組成，計算機只能執行<span class="emphasis"><em>低級語言</em></span>中的<span class="emphasis"><em>指令</em></span>（彙編語言的指令要先轉成機器碼才能執行），<span class="emphasis"><em>高級語言</em></span>要執行就必須先翻譯成低級語言，翻譯的方法有兩種－－<span class="emphasis"><em>編譯</em></span>和<span class="emphasis"><em>解釋</em></span>，雖然有這樣的不便，但高級語言有一個好處是<span class="emphasis"><em>平台無關性</em></span>。什麼是<span class="emphasis"><em>平台</em></span>？一種平台，就是一種<span class="emphasis"><em>體繫結構</em></span>，就是一種<span class="emphasis"><em>指令集</em></span>，就是一種<span class="emphasis"><em>機器語言</em></span>，這些都可看作是一一對應的，上文並沒有用“<span class="quote">一一對應</span>”這個詞，但讀者應該能推理出這個結論，而高級語言和它們不是一一對應的，因此高級語言是<span class="emphasis"><em>平台無關</em></span>的，概念之間像這樣的數量對應關係尤其重要。那麼編譯和解釋的過程有哪些不同？主要的不同在於什麼時候翻譯和什麼時候執行。</p><p>現在回答這個思考題，根據編譯和解釋的不同原理，你能否在執行效率和平台無關性等方面做一下比較？</p><p>希望讀者掌握<span class="emphasis"><em>以概念為中心的閲讀思考習慣</em></span>，每讀一節就總結一套概念之間的關係圖畫在書上空白處。如果讀到後面某一節看到一個講過的概念，但是記不清在哪一節講過了，沒關係，書後的索引可以幫你找到它是在哪一節定義的。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="ch01.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="intro.naturalformal.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">第 1 章 程序的基本概念 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 2. 自然語言和形式語言</td></tr></table></div></body></html>
