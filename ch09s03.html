<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>3. 標識符命名</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C編程一站式學習" /><link rel="up" href="ch09.html" title="第 9 章 編碼風格" /><link rel="prev" href="ch09s02.html" title="2. 註釋" /><link rel="next" href="ch09s04.html" title="4. 函數" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. 標識符命名</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09s02.html">上一頁</a> </td><th width="60%" align="center">第 9 章 編碼風格</th><td width="20%" align="right"> <a accesskey="n" href="ch09s04.html">下一頁</a></td></tr></table><hr /></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2737588"></a>3. 標識符命名</h2></div></div></div><p>標識符命名應遵循以下原則：</p><div class="orderedlist"><ol type="1"><li><p>標識符命名要清晰明了，可以使用完整的單詞和易於理解的縮寫。短的單詞可以通過去元音形成縮寫，較長的單詞可以取單詞的頭幾個字母形成縮寫。看別人的代碼看多了就可以總結出一些縮寫慣例，例如<code class="literal">count</code>寫成<code class="literal">cnt</code>，<code class="literal">block</code>寫成<code class="literal">blk</code>，<code class="literal">length</code>寫成<code class="literal">len</code>，<code class="literal">window</code>寫成<code class="literal">win</code>，<code class="literal">message</code>寫成<code class="literal">msg</code>，<code class="literal">number</code>寫成<code class="literal">nr</code>，<code class="literal">temporary</code>可以寫成<code class="literal">temp</code>，也可以進一步寫成<code class="literal">tmp</code>，最有意思的是<code class="literal">internationalization</code>寫成<code class="literal">i18n</code>，詞根<code class="literal">trans</code>經常縮寫成<code class="literal">x</code>，例如<code class="literal">transmit</code>寫成<code class="literal">xmt</code>。我就不多舉例了，請讀者在看代碼時自己注意總結和積累。</p></li><li><p>內核編碼風格規定變數、函數和類型採用全小寫加下劃線的方式命名，常量（比如宏定義和枚舉常量）採用全大寫加下劃線的方式命名，比如上一節舉例的函數名<code class="literal">radix_tree_insert</code>、類型名<code class="literal">struct radix_tree_root</code>、常量名<code class="literal">RADIX_TREE_MAP_SHIFT</code>等。</p><p>微軟髮明了一種變數命名法叫匈牙利命名法（Hungarian notation）<a id="id2738656" class="indexterm"></a>，在變數名中用首碼表示類型，例如<code class="literal">iCnt</code>（i表示int）、<code class="literal">pMsg</code>（p表示pointer）、<code class="literal">lpszText</code>（lpsz表示long pointer to a zero-ended string）等。Linus在<a class="xref" href="bi01.html#bibli.codingstyle" title="Linux內核原始碼目錄下的Documentation/CodingStyle檔案">[<abbr class="abbrev">CodingStyle</abbr>]</a>中毫不客氣地諷刺了這種寫法：“<span class="quote">Encoding the type of a function into the name (so-called Hungarian notation) is brain damaged - the compiler knows the types anyway and can check those, and it only confuses the programmer.  No wonder MicroSoft makes buggy programs.</span>”代碼風格本來就是一個很有爭議的問題，如果你接受本章介紹的內核編碼風格（也是本書所有範例代碼的風格），就不要使用大小寫混合的變數命名方式<sup>[<a id="id2738703" href="#ftn.id2738703" class="footnote">19</a>]</sup>，更不要使用匈牙利命名法。</p></li><li><p>全局變數和全局函數的命名一定要詳細，不惜多用幾個單詞多寫幾個下劃線，例如函數名<code class="literal">radix_tree_insert</code>，因為它們在整個項目的許多源檔案中都會用到，必須讓使用者明確這個變數或函數是幹什麼用的。局部變數和只在一個源檔案中調用的內部函數的命名可以簡略一些，但不能太短。儘量不要使用單個字母做變數名，只有一個例外：用<code class="literal">i</code>、<code class="literal">j</code>、<code class="literal">k</code>做循環變數是可以的。</p></li><li><p>針對中國程序員的一條特別規定：禁止用漢語拼音做標識符，可讀性極差。</p></li></ol></div><div class="footnotes"><br /><hr width="100" align="left" /><div class="footnote"><p><sup>[<a id="ftn.id2738703" href="#id2738703" class="para">19</a>] </sup>大小寫混合的命名方式是Modern C++風格所提倡的，在C++代碼中很普遍，稱為CamelCase<a id="id2738708" class="indexterm"></a>），大概是因為有高有低像駝峰一樣。</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09s02.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="ch09.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="ch09s04.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">2. 註釋 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 4. 函數</td></tr></table></div></body></html>
