<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5. 練習：實現簡單的Shell</title><link rel="stylesheet" href="styles.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Linux C編程一站式學習" /><link rel="up" href="ch30.html" title="第 30 章 進程" /><link rel="prev" href="ch30s04.html" title="4. 進程間通信" /><link rel="next" href="ch31.html" title="第 31 章 Shell腳本" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5. 練習：實現簡單的Shell</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch30s04.html">上一頁</a> </td><th width="60%" align="center">第 30 章 進程</th><td width="20%" align="right"> <a accesskey="n" href="ch31.html">下一頁</a></td></tr></table><hr /></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2868354"></a>5. 練習：實現簡單的Shell</h2></div></div></div><p>用講過的各種C函數實現一個簡單的互動式Shell，要求：</p><p>1、給出提示符，讓用戶輸入一行命令，識別程序名和參數並調用適當的<code class="literal">exec</code>函數執行程序，待執行完成後再次給出提示符。</p><p>2、識別和處理以下符號：</p><div class="itemizedlist"><ul type="disc"><li><p>簡單的標準輸入輸出重定向（&lt;和&gt;）：仿照<a class="xref" href="ch30s03.html#process.wrapper">例 30.5 “wrapper”</a>，先<code class="literal">dup2</code>然後<code class="literal">exec</code>。</p></li><li><p>管道（|）：Shell進程先調用<code class="literal">pipe</code>創建一對管道描述符，然後<code class="literal">fork</code>出兩個子進程，一個子進程關閉讀端，調用<code class="literal">dup2</code>把寫端賦給標準輸出，另一個子進程關閉寫端，調用<code class="literal">dup2</code>把讀端賦給標準輸入，兩個子進程分別調用<code class="literal">exec</code>執行程序，而Shell進程把管道的兩端都關閉，調用<code class="literal">wait</code>等待兩個子進程終止。</p></li></ul></div><p>你的程序應該可以處理以下命令：</p><div class="literallayout"><p>○ls△-l△-R○&gt;○file1○<br />
○cat○&lt;○file1○|○wc△-c○&gt;○file1○<br />
○表示零個或多個空格，△表示一個或多個空格</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch30s04.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="ch30.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="ch31.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">4. 進程間通信 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 第 31 章 Shell腳本</td></tr></table></div></body></html>
